<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <script>
    (function(d, s, id){
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {return;}
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.com/en_US/messenger.Extensions.js";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'Messenger'));
    </script>
    hello
    <script>
      window.extAsyncInit = function() {
        MessengerExtensions.askPermission(
        function(response) {
          // Success
          // This is called if user grants or rejects the asked permission.
          // response.permissions contains the list of all currently granted permissions
          var permissions = response.permissions;
          var isGranted = response.isGranted;
          if (isGranted) {
            // User has granted user_profile permission
          }

          // permissions is list of all permissions granted
          // window.open('https://storage.googleapis.com/des-cluster-bucket/myevents.ics')
          // MessengerExtensions.requestCloseBrowser(function success() {
          //   console.log('will end browser')
          // }, function error(err) {
          //   console.error(err)
          //
          // });
        }, function(errorCode, errorMessage) {
          // Error occurred
        },
        "user_profile"
      );
    };
    </script>
  </body>
</html>
